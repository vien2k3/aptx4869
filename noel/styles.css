@import url('https://fonts.googleapis.com/css2?family=Ephesis&family=Roboto:wght@500&display=swap');

/* page center */
html,body{ height:100%; }
body {
    background-color: #151522;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    margin: 0;
    padding: 28px;
    box-sizing: border-box;
    font-family: Roboto, sans-serif;
}

/* card (thi·ªáp) */
.card {
    width: min(1100px, 94%);
    max-width: 1100px;
    height: min(760px, 92vh);
    max-height: 760px;
    background: linear-gradient(135deg, #FFF8F0 0%, #FFF0FB 100%);
    border-radius: 20px;
    padding: 28px;
    box-shadow: 0 28px 60px rgba(9,10,20,0.6), inset 0 1px 0 rgba(255,255,255,0.6);
    border: 1px solid rgba(0,0,0,0.06);
    position: relative;
    overflow: hidden;
    perspective: 1200px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.card::before{
    content: "";
    position: absolute;
    right: 0;
    top: 0;
    width: 140px;
    height: 140px;
    background: linear-gradient(135deg, rgba(0,0,0,0.06), rgba(255,255,255,0.6));
    clip-path: polygon(100% 0, 100% 40%, 60% 0);
    transform-origin: top right;
    opacity: 0.9;
}

.card::after{
    content: "";
    position: absolute;
    left: 14px;
    top: 14px;
    bottom: 14px;
    width: 6px;
    background: linear-gradient(180deg,#ffdde1 0%, #ffd6a5 100%);
    border-radius: 6px;
    box-shadow: 0 0 18px rgba(255,200,160,0.12);
}

/* cover that will "open" */
/* stronger book-like cover + hinge animation */
.card {
    transform-style: preserve-3d;
    perspective: 2000px;
}

.card-cover{
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    border-radius: 20px;
    transform-origin: left center;
    transform: rotateY(0deg) translateZ(0);
    /* slower + smoother transition */
    transition: transform 2400ms cubic-bezier(.2,.8,.2,1), box-shadow 900ms;
    will-change: transform, opacity;
    z-index: 70;
    display: block;
    pointer-events: auto;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
}

/* visual front face of the cover */
.card-cover .cover-front{
    position: absolute;
    inset: 0;
    border-radius: 20px;
    background: linear-gradient(135deg, #f7efe8 0%, #f3e7f0 100%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.6), 0 20px 50px rgba(5,6,10,0.45);
    display: flex;
    align-items: center;
    justify-content: center;
    transform-origin: left center;
    backface-visibility: hidden;
    z-index: 75; /* ensure cover front (button) sits above page stack */
}

/* realistic back of cover */
.card-cover::after{
    content: "";
    position:absolute;
    inset:0;
    border-radius:20px;
    background: linear-gradient(180deg,#e8dfd8 0%, #dcd0dc 100%);
    transform: rotateY(180deg);
    backface-visibility: hidden;
    z-index:-1;
}

/* hinge shadow to accentuate opening */
.card-cover::before{
    content: "";
    position:absolute;
    left: -5%;
    top: 0;
    bottom: 0;
    width: 8%;
    border-radius: 4px;
    background: linear-gradient(90deg, rgba(0,0,0,0.28), rgba(0,0,0,0.06));
    transform-origin: left center;
    opacity: 0.0;
    transition: opacity 500ms ease;
    pointer-events: none;
}

/* thin stack of pages between cover and content */
.pages{
    position:absolute;
    left:6%;
    top:6%;
    width:88%;
    height:88%;
    border-radius:12px;
    background:
        linear-gradient(90deg, rgba(255,255,255,0.99) 0%, rgba(250,250,250,0.98) 100%);
    box-shadow: 0 8px 22px rgba(10,10,20,0.18), inset 0 0 0 1px rgba(0,0,0,0.02);
    transform-origin: left center;
    transform: rotateY(0deg);
    z-index: 50; /* lower than cover-front so button remains visible */
    pointer-events: none;
    /* slower + smoother transition */
    transition: transform 2400ms cubic-bezier(.2,.8,.2,1), box-shadow 900ms;
    will-change: transform, opacity;
}

.pages::before{
    content: "";
    position:absolute;
    left: -10px;
    top: 6%;
    bottom: 6%;
    width: 10px;
    border-radius: 6px;
    background: linear-gradient(180deg, rgba(220,220,220,0.95), rgba(200,200,200,0.6));
    box-shadow: 0 10px 30px rgba(0,0,0,0.12);
}

/* when open: cover swings like a book, pages lean, content shifts/tilts */
.card.open .card-cover{
    transform: rotateY(-180deg) translateX(-6%) translateZ(-1px);
    box-shadow: 0 40px 80px rgba(0,0,0,0.45);
    /* keep cover on top of pages while opening */
    z-index: 80;
}
.card.open .card-cover::before{ opacity: 1; transform: translateX(-6%); }

.card.open .pages{
    transform: rotateY(-12deg) translateX(8%);
    box-shadow: 0 12px 36px rgba(0,0,0,0.26);
}

/* Book-fold effect: staged opening for a nicer "g·∫≠p s√°ch" look */
/* initial staged class while animating */
.card.opening .card-cover{ transition-duration: 2400ms; }
.card.opening .pages{ transition-duration: 2400ms; }

/* folded appearance when fully open */
.card.open .pages{
    transform: rotateY(-22deg) translateX(6%) skewY(-2deg);
    box-shadow: 0 18px 48px rgba(0,0,0,0.32);
}

/* subtle tilt and depth for inner content to read as a page spread */
.card.open .card-inner{
    transform: translateX(14%) rotateY(10deg) translateZ(8px) rotateZ(-1deg);
    transition: transform 2400ms cubic-bezier(.2,.8,.2,1);
    will-change: transform, opacity;
}

.card.open .card-inner > * {
    transform: translateZ(10px);
    transition: transform 2400ms cubic-bezier(.2,.8,.2,1);
}

/* folded edge visual using pages::after */
.pages::after{
    content: "";
    position: absolute;
    right: -6%;
    top: 6%;
    bottom: 6%;
    width: 36%;
    border-radius: 0 8px 8px 0;
    background: linear-gradient(90deg, rgba(0,0,0,0.06), rgba(255,255,255,0.04));
    transform-origin: left center;
    transform: translateX(8%) skewY(0deg) rotateY(0deg);
    opacity: 0;
    transition: transform 2400ms cubic-bezier(.2,.8,.2,1), opacity 1200ms ease;
    pointer-events: none;
    z-index: 55;
}

.card.open .pages::after{
    opacity: 1;
    transform: translateX(-6%) skewY(-6deg) rotateY(-12deg);
}

.card.open .card-inner{
    transform: translateX(12%) rotateY(8deg) translateZ(0);
    transition: transform 2400ms cubic-bezier(.2,.8,.2,1);
}

/* small 3D lift for content when opened */
.card.open .card-inner > * {
    transform: translateZ(6px);
    transition: transform 2400ms cubic-bezier(.2,.8,.2,1);
}

/* responsive: tr√™n m√†n nh·ªè chuy·ªÉn th√†nh c·ªôt, v·∫´n kh√¥ng cu·ªôn */
@media (max-width: 820px){
    .card-inner {
        flex-direction: column;
        padding: 18px;
        gap: 18px;
    }
    .card-inner .mainSVG { width: 92%; max-height: 46vh; }
    .card-inner .side { width: 92%; }
}

/* centered open button on the cover */
.open-btn{
    display: inline-flex;
    align-items: center;
    gap: 10px;
    background: linear-gradient(135deg,#ff6b6b 0%, #ffb86b 100%);
    color: #fff;
    border: none;
    padding: 12px 22px;
    border-radius: 999px;
    cursor: pointer;
    font-family: Roboto, sans-serif;
    font-weight: 600;
    font-size: 18px;
    letter-spacing: 0.2px;
    box-shadow: 0 8px 30px rgba(255,107,107,0.18), 0 2px 6px rgba(0,0,0,0.28);
    transform: translateZ(40px);
    transition: transform .18s cubic-bezier(.2,.9,.3,1), box-shadow .18s ease, opacity .18s;
    -webkit-tap-highlight-color: transparent;
}
.open-btn::before{
    content: "üéÅ";
    display: inline-block;
    font-size: 20px;
    transform: translateY(-1px);
}
.open-btn:hover, .open-btn:focus{
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 18px 44px rgba(255,107,107,0.22);
    outline: none;
}
.open-btn:active{
    transform: translateY(-2px) scale(.995);
}
.open-btn.pulse{
    animation: cardPulse 1.8s infinite;
}
@keyframes cardPulse{
    0% { box-shadow: 0 8px 30px rgba(255,107,107,0.18); transform: translateZ(40px) }
    50% { box-shadow: 0 20px 60px rgba(255,107,107,0.26); transform: translateY(-6px) scale(1.02) }
    100% { box-shadow: 0 8px 30px rgba(255,107,107,0.18); transform: translateZ(40px) }
}
/* tr·∫°ng th√°i khi ƒë√£ m·ªü */
.open-btn[aria-pressed="true"]{
    background: linear-gradient(135deg,#4caf50 0%, #2e7d32 100%);
    box-shadow: 0 10px 30px rgba(46,125,50,0.18);
}
.open-btn:focus-visible{
    box-shadow: 0 0 0 4px rgba(255,182,74,0.16);
}

/* small responsive tweaks */
@media (max-width:700px){
    .open-btn{ font-size:16px; padding:10px 16px; gap:8px; }
}

/* ƒë·∫£m b·∫£o v√πng n·ªôi dung hi·ªÉn th·ªã v√† b·ªë c·ª•c 2 c·ªôt */
/* layout: 2-column balanced composition (c√¢y tr√°i, ch·ªØ + √¥ng gi√† phil b√™n ph·∫£i) */
.card-inner {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    gap: 28px;
    position: relative;
    padding: 24px;
    box-sizing: border-box;
    z-index: 10;
    overflow: hidden; /* kh√¥ng cu·ªôn l√™n xu·ªëng */
}

/* SVG (c√¢y) chi·∫øm kho·∫£ng 60% chi·ªÅu ngang card */
.card-inner .mainSVG {
    width: 60%;
    height: auto;
    max-height: calc(100% - 48px);
    display: block;
}

/* v√πng ph·∫£i ch·ª©a ch·ªØ v√† √¥ng gi√† noel */
.card-inner .side {
    width: 36%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 18px;
    box-sizing: border-box;
    padding: 8px 12px;
    text-align: center;
}

.card-inner .text {
    margin: 0;
    font-size: clamp(20px, 3.2vw, 36px);
    color: #2b1a12;
    font-family: 'Ephesis', serif;
    letter-spacing: 0.6px;
}

/* subtitle under the main greeting: same font family, smaller size, centered */
.card-inner .subtext {
    margin-top: 8px;
    /* slightly larger and bolder for better readability */
    font-size: clamp(14px, 2vw, 20px);
    color: #2b1a12;
    font-family: 'Ephesis', serif;
    letter-spacing: 0.45px;
    line-height: 1.25;
    font-weight: 700;
    text-shadow: 0 0.6px 0 rgba(0,0,0,0.06);
    /* symmetric padding for proper centering */
    padding: 0 16px;
    max-width: 100%;
    margin: 0 auto;
    text-align: center;
}

.card-inner .santa-claus {
    width: min(320px, 100%);
    height: auto;
}

/* Snow canvas sits above the card and draws falling snowflakes */
#snowCanvas{
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 95; /* above most card elements but below UI overlays if any */
}

/* Mobile tweaks: reduce heavy shadows and ensure layout fits */
@media (max-width: 600px){
    .card { padding: 16px; }
    .open-btn{ padding: 10px 14px; font-size: 15px; }
    .card-inner .mainSVG { width: 65%; }
    .card-inner .subtext{ padding: 0 12px; }
}
